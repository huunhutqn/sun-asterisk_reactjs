(this["webpackJsonpsun-asterisk_reactjs"]=this["webpackJsonpsun-asterisk_reactjs"]||[]).push([[0],{233:function(t,e,a){},234:function(t,e,a){},235:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),l=a(45),i=a.n(l),o=a(2),c=a(3),r=a(5),u=a(4),m=a(7),h=a(6),d=a(85),p=(a(91),["XS","S","M","ML","L","XL","XXL"]);function g(t){var e=Object(n.useState)(!1),a=Object(d.a)(e,2),l=a[0],i=a[1];return s.a.createElement("div",{className:"filter__available__sizes"},s.a.createElement("label",{className:"filter__available__sizes__item"},s.a.createElement("input",{type:"checkbox",value:t.value,check:l.toString(),onChange:function(){i(!l),l?t.toggle(t.value,"uncheck"):t.toggle(t.value,"check")}}),s.a.createElement("span",{className:"filter__available__sizes__item__text"},t.value)))}var _=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).sendFilterdItem=function(t){a.props.passFilteredItem(t)},a.state={whatChecked:[]},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"toggleCheckboxChange",value:function(t,e){if("check"===e){var a=function(t,e){return t.whatChecked.push(e),t.whatChecked}(this.state,t);this.setState((function(){return{whatChecked:a}})),this.sendFilterdItem(a)}else{var n=function(t,e){return t.whatChecked.map((function(a,n){a===e&&t.whatChecked.splice(n,1)})),t.whatChecked}(this.state,t);this.setState((function(){return{whatChecked:n}})),this.sendFilterdItem(n)}}},{key:"showSizes",value:function(t){var e=this;return t.map((function(t){return s.a.createElement(g,{key:t,value:t,toggle:e.toggleCheckboxChange.bind(e)})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"filter"},s.a.createElement("h4",null,"Sizes:"),this.showSizes(p),s.a.createElement("div",{className:"desc"},s.a.createElement("p",null,"Leave a star on Github if this repository was useful :))~"),s.a.createElement("a",{className:"github-button",href:"https://github.com/huunhutqn/sun-asterisk_reactjs","aria-label":"Star me/github-buttons on GitHub"},"Star")))}}]),e}(n.Component),b=(a(92),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).state={countItem:a.props.passNumItemDisplayed},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"products-top__heading"},s.a.createElement("span",{className:"products-top__heading__count"},this.props.passNumItemDisplayed),s.a.createElement("span",{className:"products-top__heading__text"}," Product(s) found."))}}]),e}(n.Component)),f=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).state={},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"handleSort",value:function(t){this.props.whichSort(t.target.value)}},{key:"componentDidUpdate",value:function(t){}},{key:"render",value:function(){return s.a.createElement("div",{className:"products-top__sort"},s.a.createElement("span",{className:"products-top__sort__text"},"Order by"),s.a.createElement("select",{className:"products-top__sort__select",name:"sort-list",ref:"products_top__sort__select",onChange:this.handleSort.bind(this)},s.a.createElement("option",{value:"default"},"Select"),s.a.createElement("option",{value:"increment"},"Lowest to highest"),s.a.createElement("option",{value:"decrement"},"Highest to lowest")))}}]),e}(n.Component),v=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).state={whichSort:""},a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidUpdate",value:function(t,e){}},{key:"render",value:function(){return s.a.createElement("div",{className:"products-top"},s.a.createElement(b,{passNumItemDisplayed:this.props.passNumItemDisplayed}),s.a.createElement(f,{whichSort:this.props.whichSort}))}}]),e}(n.Component);a(93);function y(t){this.refs.lds_ring.style.display="show"===t?"block":"none"}function E(t){console.log("da vao howsort");var e=t;switch(this.props.whichSort){case"increment":console.log("sapxem tang"),e.sort((function(t,e){return t.price-e.price}));break;case"decrement":console.log("sapxem giamr"),e.sort((function(t,e){return e.price-t.price}));break;default:return e}return e}function N(t){var e=this,a="";if(t.length>0&&(1===t.length&&"null"===this.state.last&&(t.forEach((function(t,e){a+=t})),this.state.filtered||"one"===this.state.last||(y("show"),fetch("http://localhost:3300/products?availableSizes_like="+a).then((function(t){return t.json()})).then((function(a){console.log("one"),e.setState({products:E(a),statusLoading:"loading",last:"one",filtered:!0,lastLength:t.length})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300))),console.log("ok1",a)),this.state.filtered&&2===t.length&&"many"!==this.state.last&&(t.forEach((function(e,n){t.length-n!==1?a+=e+"|":a+=e})),this.state.filtered&&(y("show"),fetch("http://localhost:3300/products?availableSizes_like="+a).then((function(t){return t.json()})).then((function(a){console.log("many"),e.setState({products:E(a),statusLoading:"loading",last:"many",filtered:!0,lastLength:t.length})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300))),console.log("ok2+",a)),this.state.filtered&&2===t.length&&"many"===this.state.last&&(t.forEach((function(e,n){t.length-n!==1?a+=e+"|":a+=e})),this.state.filtered&&(y("show"),fetch("http://localhost:3300/products?availableSizes_like="+a).then((function(t){return t.json()})).then((function(a){console.log("many"),e.setState({products:E(a),statusLoading:"loading",last:"many",filtered:!0,lastLength:t.length})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300))),console.log("ok2+",a)),this.state.filtered&&1===t.length&&"one"===this.state.last&&(t.forEach((function(t,e){a+=t})),this.state.filtered&&"one"!==this.state.last&&(y("show"),fetch("http://localhost:3300/products?availableSizes_like="+a).then((function(t){return t.json()})).then((function(a){console.log("one"),e.setState({products:E(a),statusLoading:"loading",last:"one",filtered:!0,lastLength:t.length})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300))),console.log("ok1",a)),1===t.length&&"many"===this.state.last&&(t.forEach((function(t,e){a+=t})),this.state.filtered&&"one"!==this.state.last&&(y("show"),fetch("http://localhost:3300/products?availableSizes_like="+a).then((function(t){return t.json()})).then((function(a){console.log("one"),e.setState({products:E(a),statusLoading:"loading",last:"one",filtered:!0,lastLength:t.length})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300))),console.log("ok1",a)),!0===this.state.filtered&&t.length>=3&&"many"===this.state.last)){console.log("dang o day >= 3");t.forEach((function(e,n){t.length-n!==1?a+=e+"|":("yes",a+=e,console.log("end: ",a))})),this.state.filtered&&(y("show"),fetch("http://localhost:3300/products?availableSizes_like="+a).then((function(t){return t.json()})).then((function(a){console.log("many"),e.setState({products:E(a),statusLoading:"loading",last:"many",filtered:!0,lastLength:t.length})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300))),console.log("ok2+",a)}}function k(t){var e=t.product;return this.state.products.length>=1&&"ready"===this.state.statusLoading&&this.state.products.length-t.index===1&&t.countItemDisplayed(this.state.products.length),s.a.createElement("div",{className:"products-main__item"},s.a.createElement("div",{className:"products-main__item--image"},s.a.createElement("img",{src:"images/products/".concat(e.sku,"_1.jpg"),alt:""})),function(t){if(!0===t)return s.a.createElement("div",{className:"products-main__item--label-shipping"},s.a.createElement("label",{className:"products-main__item--label-shipping__text"},"Free shipping"))}(e.isFreeShipping),s.a.createElement("div",{className:"products-main__item--name"},s.a.createElement("h4",{className:"products-main__item--name__text"},e.title)),s.a.createElement("div",{className:"products-main__item--hr"}),s.a.createElement("div",{className:"products-main__item--price"},s.a.createElement("span",{className:"products-main__item--price__unit"},e.currencyFormat),function(t){var e=parseFloat(t).toFixed(2).toString()+"",a=e.slice(e.indexOf(".")),n=e.substring(e.indexOf("."),0);return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"products-main__item--price__int"},n),s.a.createElement("span",{className:"products-main__item--price__dec"},a))}(e.price)),s.a.createElement("div",{className:"products-main__item--price-installments"},function(t,e,a){if(t>0)return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"products-main__item--price-installments__text"},"or"),s.a.createElement("span",{className:"products-main__item--price-installments__num"},t),s.a.createElement("span",{className:"products-main__item--price-installments__text"},"x"),s.a.createElement("span",{className:"products-main__item--price-installments__unit"},e),s.a.createElement("span",{className:"products-main__item--price-installments__once"},parseFloat(a/t).toFixed(2)))}(e.installments,e.currencyFormat,e.price)),s.a.createElement("div",{className:"products-main__item--add-to-bag"},s.a.createElement("button",{className:"products-main__item--add-to-bag__btn",onClick:this.handleAddToCard.bind(this,e)},s.a.createElement("span",{className:"products-main__item--add-to-bag__btn__text"},"Add to cart"))))}var S=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).countItemDisplayed=function(t){console.log("goi ham dem trong method"),a.props.passNumItemDisplayed(t)},a.state={products:[],statusLoading:"ready",last:"null",filtered:!1,lastLength:0},k=k.bind(Object(m.a)(a)),N=N.bind(Object(m.a)(a)),E=E.bind(Object(m.a)(a)),y=y.bind(Object(m.a)(a)),a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=this;"ready"===this.state.statusLoading&&"null"===this.state.last&&!1===this.state.filtered&&(y("show"),fetch("http://localhost:3300/products").then((function(t){return t.json()})).then((function(e){t.setState({products:e,statusLoading:"ready",last:"null",filtered:!1,lastLength:0})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300)))}},{key:"componentDidUpdate",value:function(t,e){var a=this;e.lastLength!==this.props.passFilteredItem.length&&(console.log("goi ham dem trong didUpdate"),console.log(e.statusLoading,this.state.statusLoading),N(this.props.passFilteredItem),this.state.products.length>=1&&"loading"===this.state.statusLoading&&this.props.passNumItemDisplayed(this.state.products.length)),t.whichSort!==this.props.whichSort&&(e.products=E(e.products),this.setState(e)),0===this.props.passFilteredItem.length&&1===e.lastLength&&(y("show"),fetch("http://localhost:3300/products").then((function(t){return t.json()})).then((function(t){a.setState({products:E(t),statusLoading:"ready",last:"null",filtered:!1,lastLength:0})}),(function(t){console.log(t)})).then(setTimeout((function(){y("hide")}),300)))}},{key:"checkNoProduct",value:function(t){0===t&&"loading"===this.state.statusLoading&&this.props.passNumItemDisplayed(0)}},{key:"handleAddToCard",value:function(t,e){var a=localStorage.getItem("bag");if(a){(a=JSON.parse(a)).products=function(){for(var e in a.products){if(a.products[e].id===t.id){a.products[e].quanity++,a.total.price=parseFloat(Number(a.total.price+t.price).toFixed(2));break}a.products.length-e===1&&(t.quanity=1,a.products.push(t))}return a.products}(),a.total.quanity++,t.installments>a.total.installments&&(a.total.installments=t.installments),a.total.price=parseFloat(Number(a.total.price+t.price).toFixed(2)),localStorage.setItem("bag",JSON.stringify(a))}else console.log("bag khong co: ",a),t.quanity=1,a={products:[t],total:{quanity:1,installments:t.installments,price:t.price,currencyId:t.currencyId,currencyFormat:t.currencyFormat}},a=JSON.stringify(a),localStorage.setItem("bag",a);this.props.isUpdateBag("yes")}},{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"products-main"},s.a.createElement("div",{className:"products-main__container"},s.a.createElement("div",{className:"lds-ring",id:"lds-ring",ref:"lds_ring"},s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null),s.a.createElement("div",null)),this.checkNoProduct(this.state.products.length),this.state.products.map((function(e,a){return s.a.createElement(k,{key:a,product:e,index:a,length:t.state.products.length,countItemDisplayed:t.countItemDisplayed})})),s.a.createElement("div",{className:"products-main__item-last"}),s.a.createElement("div",{className:"products-main__item-last"}),s.a.createElement("div",{className:"products-main__item-last"})))}}]),e}(n.Component),O=(a(94),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).state={numItemDisplayed:0,whichSort:"default"},a.tmpNum=0,a.passNumItemDisplayed=a.passNumItemDisplayed.bind(Object(m.a)(a)),a.whichSort=a.whichSort.bind(Object(m.a)(a)),a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"passNumItemDisplayed",value:function(t){this.state.numItemDisplayed!==t&&(this.tmpNum=t,console.log("so tmp ngay khi set: ",this.tmpNum),this.setState({numItemDisplayed:t}),console.log("so tmp vua khi set xong: ",this.tmpNum))}},{key:"whichSort",value:function(t){var e=this.state;e.whichSort=t,this.setState(e)}},{key:"componentDidUpdate",value:function(t,e){}},{key:"render",value:function(){return s.a.createElement("div",{className:"products"},s.a.createElement(v,{passNumItemDisplayed:this.state.numItemDisplayed,whichSort:this.whichSort}),s.a.createElement(S,{passNumItemDisplayed:this.passNumItemDisplayed,passFilteredItem:this.props.passFilteredItem,whichSort:this.state.whichSort,isUpdateBag:this.props.isUpdateBag}))}}]),e}(n.Component));a(95),a(96);function j(t){return this.state.bag?(console.log("state.bag luc nay la: ",this.state.bag),this.state.bag.products?s.a.createElement("span",{className:t},this.state.bag.total.quanity):s.a.createElement("span",{className:t},"0")):s.a.createElement("span",{className:t},"0")}var w=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).checkout=function(){a.state.bag||alert("Nothing to checkout! :)")},a.state={isMobile:!1,bag:JSON.parse(localStorage.getItem("bag"))},j=j.bind(Object(m.a)(a)),a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(t,e){if("yes"===this.props.isUpdateBag){console.log("update bag thoi");var a=JSON.parse(localStorage.getItem("bag"));e.bag?(console.log("kiem tra nao ",e.bag),console.log("kiem tra new bag nao ",a),e.bag.total.quanity!==a.total.quanity&&(e.bag=JSON.parse(localStorage.getItem("bag")),this.setState(e))):(console.log("new bag: ",a),console.log("old bag: ",e.bag),e.bag!==a&&(e.bag=JSON.parse(localStorage.getItem("bag")),this.setState(e)))}}},{key:"showBag",value:function(){var t=this.refs.bag,e=this.refs.bag__btn_show,a=this.refs.bag__btn_hide;"320px"===getComputedStyle(t).width?this.setState({isMobile:!0}):this.setState({isMobile:!1}),t.style.transform="translate(0px, 0px)",e.style.display="none",a.style.display="block"}},{key:"hideBag",value:function(){var t=this.refs.bag,e=this.refs.bag__btn_show,a=this.refs.bag__btn_hide;this.state.isMobile?t.style.transform="translate(320px, 0px)":t.style.transform="translate(450px, 0px)",e.style.display="block",a.style.display="none"}},{key:"removeProductFromBag",value:function(t,e){var a=this.state.bag;if(1===a.products.length){var n=this.state;localStorage.removeItem("bag"),n.bag=JSON.parse(localStorage.getItem("bag")),this.setState(n)}else for(var s in a.products)if(a.products[s].id===t){a.total.price-=a.products[s].price*a.products[s].quanity,a.total.quanity-=a.products[s].quanity,a.products.splice(s,1),a.total.installments=0;var l=!0,i=!1,o=void 0;try{for(var c,r=a.products[Symbol.iterator]();!(l=(c=r.next()).done);l=!0){var u=c.value;u.installments>a.total.installments&&(a.total.installments=u.installments)}}catch(h){i=!0,o=h}finally{try{l||null==r.return||r.return()}finally{if(i)throw o}}var m=this.state;m.bag=a,localStorage.setItem("bag",JSON.stringify(a)),this.setState(m);break}}},{key:"calInBag",value:function(){if(!this.state.bag)return s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"bag__content--subtotal__text__price--final"},s.a.createElement("span",null,"00.00")),s.a.createElement("span",{className:"bag__content--subtotal__text__price--installments"}));var t=this.state.bag;return t.total?(console.log("co bag total: ",t.total),t.total.price?s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"bag__content--subtotal__text__price--final"},t.total.currencyFormat," ",s.a.createElement("span",null,t.total.price.toFixed(2))),s.a.createElement("span",{className:"bag__content--subtotal__text__price--installments"},s.a.createElement("span",null,"OR UP TO")," ",t.total.installments," ",s.a.createElement("span",null,"x")," ",s.a.createElement("span",null,t.total.currencyFormat)," ",parseFloat(t.total.price/t.total.installments).toFixed(2))):void 0):s.a.createElement(s.a.Fragment,null,s.a.createElement("span",{className:"bag__content--subtotal__text__price--final"},s.a.createElement("span",null,"00.00")),s.a.createElement("span",{className:"bag__content--subtotal__text__price--installments"}))}},{key:"getProductFromLocalstorage",value:function(){var t=this;if(this.state.bag){if(this.state.bag.products){var e=this.state.bag.products;return s.a.createElement(s.a.Fragment,null,e.map((function(e,a){return s.a.createElement("div",{key:a,className:"bag__content--list__item"},s.a.createElement("button",{className:"bag__content--list__item__remove",onClick:t.removeProductFromBag.bind(t,e.id)},s.a.createElement("span",null,"x")),s.a.createElement("div",{className:"bag__content--list__item__image"},s.a.createElement("img",{src:"images/products/".concat(e.sku,"_2.jpg"),alt:""})),s.a.createElement("div",{className:"bag__content--list__item__desc"},s.a.createElement("span",null,e.title),s.a.createElement("span",null,e.availableSizes[0]," | ",e.style),s.a.createElement("span",null,"Quantity: ",e.quanity)),s.a.createElement("div",{className:"bag__content--list__item__price"},s.a.createElement("div",{className:"--text"},s.a.createElement("span",null,e.currencyFormat),s.a.createElement("span",null," ",parseFloat(e.price*e.quanity).toFixed(2)))))})))}return s.a.createElement("div",{className:"bag__content--list__item"},s.a.createElement("span",null,"Your bag is empty! :)"))}return s.a.createElement("div",{className:"bag__content--list__item"},s.a.createElement("span",null,"Your bag is empty! :)"))}},{key:"render",value:function(){return s.a.createElement("div",{className:"bag",id:"bag",ref:"bag"},s.a.createElement("button",{className:"bag__btn"},s.a.createElement("div",{className:"bag__btn--show",id:"bag__btn--show",ref:"bag__btn_show",onClick:this.showBag.bind(this)},s.a.createElement("img",{src:"images/bag-icon.png",alt:""}),j("bag__btn--show__count")),s.a.createElement("div",{className:"bag__btn--hide",id:"bag__btn--hide",ref:"bag__btn_hide",onClick:this.hideBag.bind(this)},s.a.createElement("span",null,"X"))),s.a.createElement("div",{className:"bag__content"},s.a.createElement("div",{className:"bag__content--icon"},s.a.createElement("img",{src:"images/bag-icon.png",alt:""}),j("bag__content--icon__count"),s.a.createElement("span",{className:"bag__content--icon__text"},"Bag")),s.a.createElement("div",{className:"bag__content--list"},this.getProductFromLocalstorage()),s.a.createElement("div",{className:"bag__content--subtotal"},s.a.createElement("div",{className:"bag__content--subtotal__text"},s.a.createElement("div",null,"SUBTOTAL"),s.a.createElement("div",{className:"bag__content--subtotal__text__price"},this.calInBag())),s.a.createElement("button",{className:"bag__content--subtotal__checkout",onClick:this.checkout},s.a.createElement("span",{className:"bag__content--subtotal__checkout__text"},"CHECKOUT")))))}}]),e}(n.Component);a(233);function I(t){if(console.log("bag response: ",t),"yes"===t){var e=this.state;e.isUpdateBag="yes",this.setState(e)}}function x(t){t.length>0?this.setState({filteredItem:t}):this.setState({filteredItem:[]})}var F=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(r.a)(this,Object(u.a)(e).call(this,t))).state={filteredItem:[]},x=x.bind(Object(m.a)(a)),I=I.bind(Object(m.a)(a)),a}return Object(h.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(_,{passFilteredItem:x}),s.a.createElement(O,{passFilteredItem:this.state.filteredItem,isUpdateBag:I,loading:this.refs.lds_ring}),s.a.createElement(w,{isUpdateBag:this.state.isUpdateBag}))}}]),e}(n.Component);a(234);i.a.render(s.a.createElement(F,null),document.getElementById("main"))},86:function(t,e,a){t.exports=a(235)},91:function(t,e,a){},92:function(t,e,a){},93:function(t,e,a){},94:function(t,e,a){},95:function(t,e,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.25982b15.chunk.js.map